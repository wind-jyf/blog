# 浏览器多进程架构

### 一、补充知识

* 并行处理
* 进程
* 线程

#### 1.1并行处理

> 计算机中的并行处理就是同一时刻处理多个任务。

**举例：**

我们要计算下面三个表达式的值，并显示结果

```
A = 1+2;
B = 20/5;
C = 7*8
```

我们可以将这个程序分为四个小任务：

* **任务一**：计算A=1+2
* **任务二**：计算B=20/5
* **任务三**：计算C=7*8
* **任务四**：显示结果

1. 如果是使用**单线程**，则按照执行顺序执行这四个任务

2. 如果是使用**多线程**，则可以使用三个线程同时执行前三个任务，最后再执行第四个任务

#### 1.2进程

> 进程和线程都是一个时间段的描述，是CPU工作时间段的描述

1. 通俗的来说，**一个进程就是一个程序的运行实例**
2. 当启动一个程序时，操作系统会为该程序创建一块内存，用来存放块代码、运行中的数据和一个执行任务的主线程
3. 进程之间互不干扰，如果一个进程崩溃了，或者挂起了，是不会影响其他进程的
4. 当一个进程关闭后，操作系统会回收进程所占用的内存
5. 进程其实是对指令集和虚拟存储器的抽象

![](https://user-gold-cdn.xitu.io/2018/4/20/162e0940cbe7782f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

####  1.3线程

> 由于进程之间是相互独立的，所以进程间数据共享只能通过内核实现，所以提出了线程的概念

1. 线程是不能单独存在的，它是由进程来启动和管理的。
2. 一个进程可以只有一个线程，也可以有多个线程
3. 每个线程都有一套独立的寄存器和堆栈信息，而代码、数据、文件是共享的
4. 进程中的任一线程执行出错，都会导致整个进程的崩溃

![7](E:\1-github博客\blog\images\7.png)

### 二、单进程浏览器时代

![8](E:\1-github博客\blog\images\8.png)

单进程有许多的问题，例如不稳定、不流畅、不安全。

1. **不稳定**：插件的崩溃会导致整个浏览器崩溃，渲染引擎模块也会崩溃
2. **不流畅**：将无线循环的脚本执行，将会独占整个线程
3. **不安全**：恶意插件可以随时操纵电脑

### 三、目前多进程架构

> 最新的Chrome浏览器包括：1个浏览器进程、1个GPU进程、一个网络进程、多个渲染进程和多个插件进程

打开Chrome任务管理器，查看如下

![10](E:\1-github博客\blog\images\10.png)

**最新的Chrome进程架构图**

![9](E:\1-github博客\blog\images\9.png)

* **浏览器进程**：主要负责界面显示、用户交互、子进程管理，同时提供存储功能
* **渲染进程**：就是将HTML、CSS、JavaScript进行渲染
* **GPU进程**：用来绘制Chrome的UI页面
* **网络进程**：主要负责页面的网络资源加载
* **插件进程**：因为插件容易崩溃，所以将其隔离为一个进程，插件的崩溃并不会对浏览器造成影响



### 参考：

***

* [漫谈进程和线程]( https://juejin.im/post/5ad93c63518825673a20178c#heading-1 )